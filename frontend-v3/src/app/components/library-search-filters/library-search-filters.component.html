<div class="search-filters">
  <!-- Search Bar (Always Visible) -->
  <div class="search-bar">
    <div class="search-input-wrapper">
      <span class="search-icon">üîç</span>
      <input
        type="text"
        [(ngModel)]="filters.searchQuery"
        (ngModelChange)="onSearchChange()"
        (focus)="onSearchFocus()"
        placeholder="Search: multiple words, &quot;exact phrase&quot;, wild*"
        title="Search tips:
‚Ä¢ Multiple words: all must match (in any field)
‚Ä¢ Wildcards: test* matches testing, tests
‚Ä¢ Exact phrase: &quot;hello world&quot;
‚Ä¢ Searches: filename, transcript, analysis, tags"
        class="search-input"
      />
    </div>
    <button
      class="accordion-toggle"
      (click)="toggleAccordion()"
      [attr.aria-expanded]="expanded()"
    >
      <span class="toggle-icon">{{ expanded() ? '‚ñ≤' : '‚ñº' }}</span>
      <span>Filters</span>
    </button>
  </div>

  <!-- Advanced Filters (Accordion Content) -->
  <div class="accordion-content" [class.expanded]="expanded()">
    <!-- Search In Checkboxes -->
    <div class="filter-section">
      <label class="section-label">Search In</label>
      <div class="checkbox-row">
        <label class="checkbox-label">
          <input
            type="checkbox"
            [(ngModel)]="filters.searchIn.filename"
            (ngModelChange)="onFilterChange()"
          />
          Filename
        </label>
        <label class="checkbox-label">
          <input
            type="checkbox"
            [(ngModel)]="filters.searchIn.transcript"
            (ngModelChange)="onFilterChange()"
          />
          Transcript
        </label>
        <label class="checkbox-label">
          <input
            type="checkbox"
            [(ngModel)]="filters.searchIn.analysis"
            (ngModelChange)="onFilterChange()"
          />
          AI Analysis
        </label>
      </div>
    </div>

    <div class="filter-divider"></div>

    <!-- Filter Row: Date, Type, Status -->
    <div class="filter-row">
      <div class="filter-group">
        <label>Date</label>
        <select
          [(ngModel)]="filters.dateRange"
          (ngModelChange)="onFilterChange()"
          class="filter-select"
        >
          <option value="all">All Time</option>
          <option value="today">Today</option>
          <option value="week">This Week</option>
          <option value="month">This Month</option>
          <option value="year">This Year</option>
        </select>
      </div>

      <div class="filter-group">
        <label>Type</label>
        <select
          [(ngModel)]="filters.mediaType"
          (ngModelChange)="onFilterChange()"
          class="filter-select"
        >
          <option value="all">All Types</option>
          <option value="video">Video</option>
          <option value="audio">Audio</option>
          <option value="image">Image</option>
          <option value="document">PDF</option>
          <option value="webpage">MHTML</option>
        </select>
      </div>

      <div class="filter-group">
        <label>Transcript</label>
        <select
          [(ngModel)]="filters.hasTranscript"
          (ngModelChange)="onFilterChange()"
          class="filter-select"
        >
          <option [ngValue]="null">Any</option>
          <option [ngValue]="true">Has</option>
          <option [ngValue]="false">Missing</option>
        </select>
      </div>

      <div class="filter-group">
        <label>Analysis</label>
        <select
          [(ngModel)]="filters.hasAnalysis"
          (ngModelChange)="onFilterChange()"
          class="filter-select"
        >
          <option [ngValue]="null">Any</option>
          <option [ngValue]="true">Has</option>
          <option [ngValue]="false">Missing</option>
        </select>
      </div>

      <div class="filter-group">
        <label>Suggestions</label>
        <select
          [(ngModel)]="filters.hasSuggestions"
          (ngModelChange)="onFilterChange()"
          class="filter-select"
        >
          <option [ngValue]="null">Any</option>
          <option [ngValue]="true">Has</option>
          <option [ngValue]="false">None</option>
        </select>
      </div>
    </div>

    <div class="filter-divider"></div>

    <!-- Sort Row -->
    <div class="filter-row filter-row-sort">
      <div class="filter-group filter-group-grow">
        <label>Sort By</label>
        <select
          [(ngModel)]="filters.sortBy"
          (ngModelChange)="onFilterChange()"
          class="filter-select"
        >
          <option value="date">Date Added</option>
          <option value="name">Name</option>
          <option value="duration">Duration</option>
          <option value="suggestions">Has AI Suggestions</option>
          <option value="no-analysis">Missing Analysis</option>
          <option value="no-transcript">Missing Transcript</option>
        </select>
      </div>

      <div class="filter-group">
        <label>Order</label>
        <select
          [(ngModel)]="filters.sortOrder"
          (ngModelChange)="onFilterChange()"
          class="filter-select"
        >
          <option value="desc">Desc</option>
          <option value="asc">Asc</option>
        </select>
      </div>

      <div class="filter-group">
        <label>&nbsp;</label>
        <button
          class="clear-filters-btn"
          (click)="clearFilters()"
        >
          Clear All
        </button>
      </div>
    </div>
  </div>
</div>
