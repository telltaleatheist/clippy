/* You can add global styles to this file, and also import other style files */
@use '@angular/material/prebuilt-themes/indigo-pink.css';

/* Import Creamsicle Theme */
@use './styles-creamsicle.scss';

/* Global styles */
html, body {
  height: 100%;
  margin: 0;
  font-family: var(--font-family);
}

body {
  background-color: var(--bg-primary);
  color: var(--text-primary);
  transition: var(--transition);
}

/* Fix Material chip text color in dark mode */
@media (prefers-color-scheme: dark) {
  mat-chip {
    .mdc-evolution-chip__text-label,
    .mat-mdc-chip-action-label {
      color: #e5e7eb !important;
    }
  }

  // Material Menu dark mode styling (applies globally to all menus)
  .mat-mdc-menu-panel {
    background-color: #2d2d2d !important;
    color: rgba(255, 255, 255, 0.87) !important;

    .mat-mdc-menu-content {
      background-color: #2d2d2d !important;
    }

    .mat-mdc-menu-item {
      color: rgba(255, 255, 255, 0.87) !important;
      border: 2px solid transparent !important;
      transition: all 0.2s cubic-bezier(0.4, 0, 0.2, 1),
                  box-shadow 0.3s cubic-bezier(0.4, 0, 0.2, 1) !important;

      // Remove default focus styling when not using keyboard (must come before hover)
      &:focus:not(:focus-visible):not(:hover) {
        background-color: transparent !important;
        border-left: 2px solid transparent !important;
        border-right: 2px solid transparent !important;
        box-shadow: none !important;
      }

      // Only apply focus styles when actually focused via keyboard, not on menu open
      &:focus-visible {
        background-color: rgba(255, 102, 0, 0.18) !important;
        border: 2px solid rgba(255, 102, 0, 0.7) !important;
        box-shadow:
          -4px 0 10px rgba(255, 102, 0, 0.25),
          4px 0 10px rgba(255, 102, 0, 0.25),
          0 0 8px rgba(255, 102, 0, 0.25),
          inset 0 0 4px rgba(255, 102, 0, 0.1) !important;
      }

      // Hover always wins (must come last for specificity)
      &:hover {
        background-color: rgba(255, 102, 0, 0.18) !important;
        border: 2px solid rgba(255, 102, 0, 0.7) !important;
        box-shadow:
          -4px 0 10px rgba(255, 102, 0, 0.25),
          4px 0 10px rgba(255, 102, 0, 0.25),
          0 0 8px rgba(255, 102, 0, 0.25),
          inset 0 0 4px rgba(255, 102, 0, 0.1) !important;
      }

      // Icons in menu items
      .mat-icon,
      mat-icon {
        color: rgba(255, 255, 255, 0.7) !important;
      }

      // Text spans in menu items
      span {
        color: rgba(255, 255, 255, 0.87) !important;
      }

      // Checkbox in menu items
      .mat-mdc-checkbox {
        .mdc-checkbox__background {
          border-color: rgba(255, 255, 255, 0.5) !important;
        }

        .mdc-checkbox__checkmark {
          color: #fff !important;
        }
      }
    }

    // Dividers in menus
    .mat-divider,
    mat-divider {
      border-top-color: rgba(255, 255, 255, 0.12) !important;
    }

    // Menu header (for file type menu)
    .menu-header {
      color: rgba(255, 255, 255, 0.87) !important;
      border-bottom-color: rgba(255, 255, 255, 0.12) !important;

      button,
      .mat-mdc-button,
      .mat-mdc-icon-button {
        color: rgba(255, 255, 255, 0.87) !important;

        &:hover {
          background-color: rgba(255, 255, 255, 0.08) !important;
        }
      }

      span {
        color: rgba(255, 255, 255, 0.87) !important;
      }

      mat-icon {
        color: rgba(255, 255, 255, 0.7) !important;
      }
    }
  }
}

.dark-theme,
.theme-dark {
  mat-chip {
    .mdc-evolution-chip__text-label,
    .mat-mdc-chip-action-label {
      color: #e5e7eb !important;
    }
  }

  // Fix tab text colors in dark mode
  mat-tab-group {
    .mdc-tab__text-label {
      color: rgba(255, 255, 255, 0.7) !important;
    }

    .mdc-tab--active .mdc-tab__text-label {
      color: #ff8f47 !important;
    }
  }

  // Material Menu dark mode styling (applies globally to all menus)
  .mat-mdc-menu-panel {
    background-color: #2d2d2d !important;
    color: rgba(255, 255, 255, 0.87) !important;

    .mat-mdc-menu-content {
      background-color: #2d2d2d !important;
    }

    .mat-mdc-menu-item {
      color: rgba(255, 255, 255, 0.87) !important;
      border: 2px solid transparent !important;
      transition: all 0.2s cubic-bezier(0.4, 0, 0.2, 1),
                  box-shadow 0.3s cubic-bezier(0.4, 0, 0.2, 1) !important;

      // Remove default focus styling when not using keyboard (must come before hover)
      &:focus:not(:focus-visible):not(:hover) {
        background-color: transparent !important;
        border-left: 2px solid transparent !important;
        border-right: 2px solid transparent !important;
        box-shadow: none !important;
      }

      // Only apply focus styles when actually focused via keyboard, not on menu open
      &:focus-visible {
        background-color: rgba(255, 102, 0, 0.18) !important;
        border: 2px solid rgba(255, 102, 0, 0.7) !important;
        box-shadow:
          -4px 0 10px rgba(255, 102, 0, 0.25),
          4px 0 10px rgba(255, 102, 0, 0.25),
          0 0 8px rgba(255, 102, 0, 0.25),
          inset 0 0 4px rgba(255, 102, 0, 0.1) !important;
      }

      // Hover always wins (must come last for specificity)
      &:hover {
        background-color: rgba(255, 102, 0, 0.18) !important;
        border: 2px solid rgba(255, 102, 0, 0.7) !important;
        box-shadow:
          -4px 0 10px rgba(255, 102, 0, 0.25),
          4px 0 10px rgba(255, 102, 0, 0.25),
          0 0 8px rgba(255, 102, 0, 0.25),
          inset 0 0 4px rgba(255, 102, 0, 0.1) !important;
      }

      // Icons in menu items
      .mat-icon,
      mat-icon {
        color: rgba(255, 255, 255, 0.7) !important;
      }

      // Text spans in menu items
      span {
        color: rgba(255, 255, 255, 0.87) !important;
      }

      // Checkbox in menu items
      .mat-mdc-checkbox {
        .mdc-checkbox__background {
          border-color: rgba(255, 255, 255, 0.5) !important;
        }

        .mdc-checkbox__checkmark {
          color: #fff !important;
        }
      }
    }

    // Dividers in menus
    .mat-divider,
    mat-divider {
      border-top-color: rgba(255, 255, 255, 0.12) !important;
    }

    // Menu header (for file type menu)
    .menu-header {
      color: rgba(255, 255, 255, 0.87) !important;
      border-bottom-color: rgba(255, 255, 255, 0.12) !important;

      button,
      .mat-mdc-button,
      .mat-mdc-icon-button {
        color: rgba(255, 255, 255, 0.87) !important;

        &:hover {
          background-color: rgba(255, 255, 255, 0.08) !important;
        }
      }

      span {
        color: rgba(255, 255, 255, 0.87) !important;
      }

      mat-icon {
        color: rgba(255, 255, 255, 0.7) !important;
      }
    }
  }
}

/* Material Menu light mode styling (applies globally to all menus) */
.mat-mdc-menu-panel {
  .mat-mdc-menu-item {
    border-left: 2px solid transparent !important;
    border-right: 2px solid transparent !important;
    transition: all 0.2s cubic-bezier(0.4, 0, 0.2, 1),
                box-shadow 0.3s cubic-bezier(0.4, 0, 0.2, 1) !important;

    // Remove default focus styling when not using keyboard (must come before hover)
    &:focus:not(:focus-visible):not(:hover) {
      background-color: transparent !important;
      border: 2px solid transparent !important;
      box-shadow: none !important;
    }

    // Only apply focus styles when actually focused via keyboard, not on menu open
    &:focus-visible {
      background-color: rgba(255, 102, 0, 0.12) !important;
      border: 2px solid rgba(255, 102, 0, 0.6) !important;
      box-shadow:
        -3px 0 8px rgba(255, 102, 0, 0.2),
        3px 0 8px rgba(255, 102, 0, 0.2),
        0 0 6px rgba(255, 102, 0, 0.2),
        inset 0 0 3px rgba(255, 102, 0, 0.08) !important;
    }

    // Hover always wins (must come last for specificity)
    &:hover {
      background-color: rgba(255, 102, 0, 0.12) !important;
      border: 2px solid rgba(255, 102, 0, 0.6) !important;
      box-shadow:
        -3px 0 8px rgba(255, 102, 0, 0.2),
        3px 0 8px rgba(255, 102, 0, 0.2),
        0 0 6px rgba(255, 102, 0, 0.2),
        inset 0 0 3px rgba(255, 102, 0, 0.08) !important;
    }
  }
}

/* Common utility classes */
.spacer {
  flex: 1 1 auto;
}

/* Video Analysis Dialog Panel - Size to content, max 85vh */
.cdk-overlay-pane.video-analysis-dialog-panel {
  max-height: 85vh !important;
  overflow: visible !important;

  .mat-mdc-dialog-container {
    max-height: 85vh !important;
    overflow: visible !important;
  }

  .mat-mdc-dialog-surface {
    max-height: 85vh !important;
    overflow: visible !important;
  }

  // Only the content area should scroll if needed
  mat-dialog-content {
    overflow-y: auto !important;
    overflow-x: hidden !important;
  }
}

/* Fullscreen dialog */
.fullscreen-dialog {
  .mat-mdc-dialog-container {
    padding: 0;
    border-radius: 0;
    max-width: 100vw !important;
    max-height: 100vh !important;
    width: 100vw !important;
    height: 100vh !important;
  }
}

/* Video player dialog */
.video-player-dialog-container {
  .mat-mdc-dialog-container {
    padding: 0 !important;
    border-radius: 0;
    max-width: 100vw !important;
    max-height: 100vh !important;
    overflow: hidden;
    position: relative;
  }

  .mdc-dialog__surface {
    max-width: 100vw !important;
    max-height: 100vh !important;
    overflow: hidden;
  }

  // Add close button styling at the dialog container level
  .mat-mdc-dialog-content {
    position: relative;
  }
}

/* Dialog backdrop - ensure it's opaque and blocks content behind */
.cdk-overlay-backdrop {
  background-color: rgba(0, 0, 0, 0.8) !important;
}

.cdk-overlay-backdrop.cdk-overlay-backdrop-showing {
  opacity: 1 !important;
}

/* Remove backdrop for mat-select dropdowns */
.cdk-overlay-backdrop.cdk-overlay-transparent-backdrop {
  background-color: transparent !important;
  opacity: 0 !important;
  pointer-events: none !important;
}

/* Batch Progress Dialog - Large with no scrollbars */
.batch-progress-large-dialog {
  max-height: none !important;

  .mat-mdc-dialog-container,
  .mdc-dialog__container {
    max-height: none !important;
    height: auto !important;
  }

  .mat-mdc-dialog-surface,
  .mdc-dialog__surface {
    max-height: none !important;
    height: auto !important;
  }

  .mat-mdc-dialog-content,
  .mdc-dialog__content,
  mat-dialog-content {
    max-height: none !important;
    overflow-y: visible !important;
  }
}

/* Also target the overlay pane directly */
.cdk-overlay-pane.batch-progress-large-dialog {
  max-height: 90vh !important;

  .mat-mdc-dialog-container {
    max-height: 90vh !important;
    height: auto !important;
  }
}

/* Custom backdrop for dialogs that need to fully block content */
.dialog-backdrop {
  background-color: rgba(0, 0, 0, 0.95) !important;
  backdrop-filter: blur(4px);
}

.dialog-backdrop.cdk-overlay-backdrop-showing {
  opacity: 1 !important;
}

/* Hide ALL Video.js UI elements globally (including modals/menus appended to body) */
.vjs-modal-dialog,
.vjs-control-bar,
.vjs-big-play-button,
.vjs-menu,
.vjs-menu-button,
.vjs-menu-content,
.vjs-menu-item,
.vjs-text-track-display,
.vjs-button,
.vjs-control,
.vjs-loading-spinner,
.vjs-poster,
.vjs-play-control,
.vjs-volume-panel,
.vjs-current-time,
.vjs-time-divider,
.vjs-duration,
.vjs-progress-control,
.vjs-fullscreen-control,
.vjs-remaining-time,
.vjs-playback-rate,
.vjs-chapters-button,
.vjs-descriptions-button,
.vjs-captions-button,
.vjs-subs-caps-button,
.vjs-audio-button,
.vjs-picture-in-picture-control {
  display: none !important;
  visibility: hidden !important;
  opacity: 0 !important;
  pointer-events: none !important;
}

/* Batch progress card positioning - handled by app.component.ts JavaScript */

/* AI Setup Wizard Dialog - Remove default padding */
.ai-wizard-dialog .mat-mdc-dialog-container .mdc-dialog__surface {
  padding: 0 !important;
}

.ai-wizard-dialog .mat-mdc-dialog-container {
  padding: 0 !important;
}
