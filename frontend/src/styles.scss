/* You can add global styles to this file, and also import other style files */

/* Import Custom Material Theme */
@use './material-theme.scss';

/* Import Creamsicle CSS Variables */
@use './styles-creamsicle.scss';

/* Import Timeline Editor Theme */
@import '../projects/ngx-video-timeline-editor/src/lib/styles/timeline-theme';

/* Global styles */
html, body {
  height: 100%;
  margin: 0;
  font-family: var(--font-family);
}

body {
  background-color: var(--bg-primary) !important;
  color: var(--text-primary) !important;
  transition: var(--transition);
}

/* Common utility classes */
.spacer {
  flex: 1 1 auto;
}

/* Video Analysis Dialog Panel - Size to content, max 85vh */
.cdk-overlay-pane.video-analysis-dialog-panel {
  max-height: 85vh !important;
  overflow: visible !important;

  .mat-mdc-dialog-container {
    max-height: 85vh !important;
    overflow: visible !important;
  }

  .mat-mdc-dialog-surface {
    max-height: 85vh !important;
    overflow: visible !important;
  }

  // Only the content area should scroll if needed
  mat-dialog-content {
    overflow-y: auto !important;
    overflow-x: hidden !important;
  }
}

/* Fullscreen dialog */
.fullscreen-dialog {
  .mat-mdc-dialog-container {
    padding: 0;
    border-radius: 0;
    max-width: 100vw !important;
    max-height: 100vh !important;
    width: 100vw !important;
    height: 100vh !important;
  }
}

/* Video player dialog */
.video-player-dialog-container {
  .mat-mdc-dialog-container {
    padding: 0 !important;
    border-radius: 0;
    max-width: 100vw !important;
    max-height: 100vh !important;
    overflow: hidden;
    position: relative;
  }

  .mdc-dialog__surface {
    max-width: 100vw !important;
    max-height: 100vh !important;
    overflow: hidden;
  }

  // Add close button styling at the dialog container level
  .mat-mdc-dialog-content {
    position: relative;
  }
}

/* Dialog backdrop - ensure it's opaque and blocks content behind */
.cdk-overlay-backdrop {
  background-color: rgba(0, 0, 0, 0.8) !important;
}

.cdk-overlay-backdrop.cdk-overlay-backdrop-showing {
  opacity: 1 !important;
}

/* Remove backdrop for mat-select dropdowns */
.cdk-overlay-backdrop.cdk-overlay-transparent-backdrop {
  background-color: transparent !important;
  opacity: 0 !important;
  pointer-events: none !important;
}

/* Batch Progress Dialog - Large with no scrollbars */
.batch-progress-large-dialog {
  max-height: none !important;

  .mat-mdc-dialog-container,
  .mdc-dialog__container {
    max-height: none !important;
    height: auto !important;
  }

  .mat-mdc-dialog-surface,
  .mdc-dialog__surface {
    max-height: none !important;
    height: auto !important;
  }

  .mat-mdc-dialog-content,
  .mdc-dialog__content,
  mat-dialog-content {
    max-height: none !important;
    overflow-y: visible !important;
  }
}

/* Also target the overlay pane directly */
.cdk-overlay-pane.batch-progress-large-dialog {
  max-height: 90vh !important;

  .mat-mdc-dialog-container {
    max-height: 90vh !important;
    height: auto !important;
  }
}

/* Preview dialog: Make overlay non-blocking so keyboard events reach cascade list */
.cdk-overlay-pane.preview-dialog-panel {
  pointer-events: none; // Let events pass through the overlay

  .mat-mdc-dialog-container {
    pointer-events: auto; // But allow interaction with the dialog itself
  }
}

/* Custom backdrop for dialogs that need to fully block content */
.dialog-backdrop {
  background-color: rgba(0, 0, 0, 0.95) !important;
  backdrop-filter: blur(4px);
}

.dialog-backdrop.cdk-overlay-backdrop-showing {
  opacity: 1 !important;
}

/* Hide ALL Video.js UI elements globally (including modals/menus appended to body) */
.vjs-modal-dialog,
.vjs-control-bar,
.vjs-big-play-button,
.vjs-menu,
.vjs-menu-button,
.vjs-menu-content,
.vjs-menu-item,
.vjs-text-track-display,
.vjs-button,
.vjs-control,
.vjs-loading-spinner,
.vjs-poster,
.vjs-play-control,
.vjs-volume-panel,
.vjs-current-time,
.vjs-time-divider,
.vjs-duration,
.vjs-progress-control,
.vjs-fullscreen-control,
.vjs-remaining-time,
.vjs-playback-rate,
.vjs-chapters-button,
.vjs-descriptions-button,
.vjs-captions-button,
.vjs-subs-caps-button,
.vjs-audio-button,
.vjs-picture-in-picture-control {
  display: none !important;
  visibility: hidden !important;
  opacity: 0 !important;
  pointer-events: none !important;
}

/* Batch progress card positioning - handled by app.component.ts JavaScript */

/* AI Setup Wizard Dialog - Remove default padding */
.ai-wizard-dialog .mat-mdc-dialog-container .mdc-dialog__surface {
  padding: 0 !important;
}

.ai-wizard-dialog .mat-mdc-dialog-container {
  padding: 0 !important;
}

/* Database Migration Wizard - Force dark mode colors */
.migration-wizard {
  background-color: #1e1e1e !important;
  color: #e0e0e0 !important;

  h1, h2, h3, h4, h5, h6 {
    color: #ffffff !important;
  }

  p, span, li, div, label {
    color: #e0e0e0 !important;
  }

  /* Material stepper - dark background */
  .mat-stepper-horizontal,
  .mat-stepper-vertical {
    background-color: #2d2d2d !important;
  }

  .mat-step-header {
    background-color: #2d2d2d !important;
  }

  /* Step content panels */
  .mat-horizontal-content-container,
  .mat-vertical-content-container {
    background-color: #1e1e1e !important;
  }

  /* Material form fields */
  .mat-mdc-form-field {
    color: #e0e0e0 !important;

    .mdc-text-field {
      background-color: #2d2d2d !important;
    }
  }

  .mat-mdc-form-field-hint,
  .mat-mdc-form-field-error {
    color: rgba(255, 255, 255, 0.7) !important;
  }

  /* Material stepper labels */
  .mat-step-label,
  .mat-step-text-label {
    color: #e0e0e0 !important;
  }

  /* Material cards if any */
  .mat-mdc-card {
    background-color: #2d2d2d !important;
    color: #e0e0e0 !important;
  }

  /* Expansion panels */
  .mat-expansion-panel {
    background-color: #2d2d2d !important;
    color: #e0e0e0 !important;
  }

  /* Input fields */
  input, textarea {
    background-color: #2d2d2d !important;
    color: #ffffff !important;
  }
}
