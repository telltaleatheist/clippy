<div class="app-container">
  <!-- Top Toolbar -->
  <mat-toolbar color="primary" class="app-toolbar">
    <button mat-icon-button (click)="sidenav.toggle()" class="menu-button" aria-label="Toggle menu">
      <mat-icon>menu</mat-icon>
    </button>
    <span class="app-title">{{ title }}</span>
    <span class="spacer"></span>
    <app-download-queue></app-download-queue>
    <app-notification-bell></app-notification-bell>
  </mat-toolbar>

  <!-- Sidebar + Content Layout -->
  <mat-sidenav-container class="sidenav-container">
    <!-- Left Sidebar Navigation -->
    <mat-sidenav #sidenav mode="side" opened class="app-sidenav">
      <div class="sidenav-content">
        <mat-nav-list class="nav-list">
          <a mat-list-item routerLink="/library" routerLinkActive="active-link" (click)="onLibraryClick()">
            <mat-icon matListItemIcon>video_library</mat-icon>
            <span matListItemTitle>Video Library</span>
          </a>
          <a mat-list-item routerLink="/batch-downloads" routerLinkActive="active-link">
            <mat-icon matListItemIcon>cloud_download</mat-icon>
            <span matListItemTitle>Batch Downloads</span>
          </a>
          <a mat-list-item routerLink="/bulk-analysis" routerLinkActive="active-link">
            <mat-icon matListItemIcon>auto_fix_high</mat-icon>
            <span matListItemTitle>Analyze All</span>
          </a>
          <a mat-list-item routerLink="/saved-links" routerLinkActive="active-link">
            <mat-icon matListItemIcon>bookmarks</mat-icon>
            <span matListItemTitle>Saved for Later</span>
          </a>
          <a mat-list-item routerLink="/video-editor" routerLinkActive="active-link">
            <mat-icon matListItemIcon>movie_edit</mat-icon>
            <span matListItemTitle>Video Editor</span>
          </a>
          <a mat-list-item routerLink="/normalize" routerLinkActive="active-link">
            <mat-icon matListItemIcon>equalizer</mat-icon>
            <span matListItemTitle>Normalize Audio</span>
          </a>
          <a mat-list-item routerLink="/analysis-parameters" routerLinkActive="active-link">
            <mat-icon matListItemIcon>tune</mat-icon>
            <span matListItemTitle>Analysis Parameters</span>
          </a>
          <a mat-list-item routerLink="/settings" routerLinkActive="active-link">
            <mat-icon matListItemIcon>settings</mat-icon>
            <span matListItemTitle>Settings</span>
          </a>

          <mat-divider></mat-divider>

          <a mat-list-item routerLink="/database-migration" routerLinkActive="active-link" class="migration-link">
            <mat-icon matListItemIcon>sync_alt</mat-icon>
            <span matListItemTitle>Database Migration</span>
          </a>

          <a mat-list-item routerLink="/relink" routerLinkActive="active-link" class="relink-link">
            <mat-icon matListItemIcon>link</mat-icon>
            <span matListItemTitle>Relink Files</span>
          </a>
        </mat-nav-list>

        <div class="theme-toggle-container">
          <app-theme-toggle></app-theme-toggle>
        </div>
      </div>
    </mat-sidenav>

    <!-- Main Content Area -->
    <mat-sidenav-content>
      <main class="main-content">
        <router-outlet></router-outlet>
      </main>
    </mat-sidenav-content>
  </mat-sidenav-container>

  <!-- Notification Components -->
  <app-notification-toast></app-notification-toast>
  <app-notification-modal></app-notification-modal>
</div>