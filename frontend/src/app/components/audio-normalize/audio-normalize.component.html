<!-- Audio Normalization - Creamsicle Theme -->
<div class="normalize-container">
  <div class="page-content">
    <!-- Audio Normalization Panel -->
    <div class="panel full-height-panel">
      <div class="panel-header">
        <h4 class="panel-title">ðŸŽµ Audio Normalization</h4>
        <div class="panel-header-actions">
          <button mat-raised-button (click)="openSettingsDialog()" [disabled]="isProcessing">
            <mat-icon>settings</mat-icon> Settings
          </button>
          <button mat-raised-button color="primary" (click)="selectMedia()" [disabled]="isProcessing">
            <mat-icon>add</mat-icon> Select Media
          </button>
          <button mat-stroked-button color="warn" (click)="clearAll()" [disabled]="isProcessing || selectedFiles.length === 0">
            <mat-icon>clear_all</mat-icon> Clear All
          </button>
        </div>
      </div>

      <div class="panel-content">
        <div class="files-list">
          <div *ngFor="let file of selectedFiles; let i = index"
               class="file-card"
               [ngClass]="'file-' + (file.status || 'unknown')">

            <div class="file-content">
              <span class="file-title">{{ file.name }}</span>
              <div class="file-right">
                <span class="badge" [ngClass]="'badge-' + getStatusBadgeType(file.status || '')">
                  {{ file.status }}
                </span>
                <button *ngIf="file.status !== 'processing'"
                        type="button"
                        class="remove-button"
                        (click)="removeFile(i)"
                        [disabled]="isProcessing"
                        title="Remove file">
                  <mat-icon>close</mat-icon>
                </button>
              </div>
            </div>

            <div class="progress-bar processing-bar" *ngIf="file.status === 'processing'"></div>
          </div>

          <div class="empty-state" *ngIf="selectedFiles.length === 0">
            <mat-icon class="empty-icon">music_note</mat-icon>
            <p>No files selected</p>
            <p class="empty-hint">Select individual files or choose a folder to normalize audio</p>
          </div>
        </div>

        <div class="panel-actions">
          <button mat-raised-button color="primary" (click)="startNormalization()"
                  [disabled]="isProcessing || selectedFiles.length === 0 || normalizeForm.invalid">
            <mat-icon>equalizer</mat-icon> {{ isProcessing ? 'Processing...' : 'Normalize Audio' }}
          </button>
        </div>
      </div>
    </div>
  </div>
</div>
