<div class="saved-links-container"
     (dragover)="onDragOver($event)"
     (dragleave)="onDragLeave($event)"
     (drop)="onDrop($event)"
     [class.dragging]="isDragging">
  <!-- Drag Overlay -->
  <div class="drag-overlay" *ngIf="isDragging">
    <div class="drag-content">
      <mat-icon>link</mat-icon>
      <h3>Drop URL here to download</h3>
      <p>The video will be automatically downloaded and added to your library</p>
    </div>
  </div>

  <div class="header">
    <h2>Saved for Later</h2>
    <div class="stats">
      <mat-chip-set>
        <mat-chip class="badge stat-chip" [highlighted]="!filterStatus" (click)="filterByStatus(undefined)">
          All ({{ savedLinks.length }})
        </mat-chip>
        <mat-chip class="badge status-active stat-chip" [highlighted]="filterStatus === 'pending'" (click)="filterByStatus('pending')">
          Pending ({{ pendingCount }})
        </mat-chip>
        <mat-chip class="badge status-active stat-chip" [highlighted]="filterStatus === 'downloading'" (click)="filterByStatus('downloading')">
          Downloading ({{ downloadingCount }})
        </mat-chip>
        <mat-chip class="tag success stat-chip" [highlighted]="filterStatus === 'completed'" (click)="filterByStatus('completed')">
          Completed ({{ completedCount }})
        </mat-chip>
        <mat-chip class="tag warning stat-chip" [highlighted]="filterStatus === 'failed'" (click)="filterByStatus('failed')">
          Failed ({{ failedCount }})
        </mat-chip>
      </mat-chip-set>
    </div>
  </div>

  <!-- Loading State -->
  <div *ngIf="isLoading" class="loading-state">
    <mat-spinner diameter="50"></mat-spinner>
    <p>Loading saved links...</p>
  </div>

  <!-- Empty State -->
  <div *ngIf="!isLoading && savedLinks.length === 0" class="empty-state">
    <mat-icon class="empty-icon">link_off</mat-icon>
    <h3>No saved links</h3>
    <p>Use the web interface on your phone to save links while you're out!</p>
    <p class="hint">Visit: <strong>http://owens-mac-studio.local:3000/saved</strong></p>
  </div>

  <!-- Links List (Cascade Format) -->
  <div *ngIf="!isLoading && savedLinks.length > 0" class="links-list">
    <cascade-list
      [items]="savedLinksAsListItems"
      [displayConfig]="displayConfig"
      [selectionMode]="SelectionMode.Multiple"
      [contextMenuActions]="contextActions"
      (itemClick)="onItemClick($event)"
      (contextMenuAction)="onContextMenuAction($event)"
      emptyMessage="No saved links"
      emptyIcon="link_off">
    </cascade-list>
  </div>
</div>
