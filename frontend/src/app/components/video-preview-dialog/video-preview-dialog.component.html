<div class="preview-dialog">
  <div class="preview-header">
    <div class="header-icon">
      <mat-icon>movie</mat-icon>
    </div>
    <div class="header-title">
      <h2>{{ data.filename }}</h2>
      <p class="file-extension">{{ getFileExtension() }} File</p>
    </div>
    <button mat-icon-button (click)="close()" class="close-button">
      <mat-icon>close</mat-icon>
    </button>
  </div>

  <mat-divider></mat-divider>

  <!-- Video Preview Section -->
  <div class="video-preview-section">
    <video
      #videoPlayer
      class="video-preview"
      [src]="getVideoUrl()"
      controls
      preload="metadata"
      (error)="onVideoError($event)">
      Your browser does not support video playback.
    </video>
    <div *ngIf="videoError" class="video-error">
      <mat-icon>error_outline</mat-icon>
      <p>Unable to load video preview</p>
    </div>
  </div>

  <mat-divider></mat-divider>

  <div class="preview-content">
    <!-- Status Chips -->
    <div class="status-section">
      <mat-chip-set>
        <mat-chip *ngIf="data.needs_transcript === 1" color="accent" highlighted>
          <mat-icon>subtitles</mat-icon>
          Needs Transcript
        </mat-chip>
        <mat-chip *ngIf="data.needs_analysis === 1" color="primary" highlighted>
          <mat-icon>analytics</mat-icon>
          Needs Analysis
        </mat-chip>
        <mat-chip *ngIf="data.needs_transcript === 0 && data.needs_analysis === 0">
          <mat-icon>check_circle</mat-icon>
          Processed
        </mat-chip>
      </mat-chip-set>
    </div>

    <mat-divider></mat-divider>

    <!-- Video Details -->
    <div class="details-section">
      <div class="detail-row">
        <mat-icon>schedule</mat-icon>
        <div class="detail-content">
          <span class="detail-label">Duration</span>
          <span class="detail-value">{{ formatDuration(data.duration_seconds) }}</span>
        </div>
      </div>

      <div class="detail-row" *ngIf="data.upload_date">
        <mat-icon>cloud_upload</mat-icon>
        <div class="detail-content">
          <span class="detail-label">Upload Date</span>
          <span class="detail-value">{{ formatDate(data.upload_date) }}</span>
        </div>
      </div>

      <div class="detail-row" *ngIf="data.download_date">
        <mat-icon>cloud_download</mat-icon>
        <div class="detail-content">
          <span class="detail-label">Download Date</span>
          <span class="detail-value">{{ formatDate(data.download_date) }}</span>
        </div>
      </div>

      <div class="detail-row">
        <mat-icon>folder</mat-icon>
        <div class="detail-content">
          <span class="detail-label">File Path</span>
          <span class="detail-value path">{{ getFilePath() }}</span>
        </div>
      </div>
    </div>
  </div>

  <mat-divider></mat-divider>

  <div class="preview-footer">
    <p class="keyboard-hint">
      <mat-icon>keyboard</mat-icon>
      Press <kbd>Space</kbd> or <kbd>Esc</kbd> to close
    </p>
  </div>
</div>
