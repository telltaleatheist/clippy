<div class="settings-container">
  <!-- Header -->
  <div class="page-header">
    <h1>
      <mat-icon>settings</mat-icon>
      Settings
    </h1>
    <p class="header-subtitle">Configure your application preferences and download options</p>
  </div>

  <!-- Main Layout -->
  <div class="main-layout">
    <div class="settings-content">
      <form [formGroup]="settingsForm" (ngSubmit)="onSubmit()" class="settings-form">
          <!-- Output Directory -->
          <div class="form-step">
            <div class="step-content">
              <h3 class="step-title">Output Directory</h3>
              <div class="setting-group">
                <div class="input-wrapper">
                  <mat-icon class="input-icon">folder</mat-icon>
                  <input type="text"
                         class="modern-input"
                         formControlName="outputDir"
                         placeholder="/path/to/folder">
                  <button mat-raised-button
                          color="primary"
                          type="button"
                          (click)="browseOutputDir()"
                          *ngIf="isElectron"
                          class="browse-btn">
                    <mat-icon>folder_open</mat-icon>
                    Browse
                  </button>
                </div>
                <span class="hint-text">
                  <mat-icon>info</mat-icon>
                  Files will be organized in: <code>videos/</code>, <code>analysis/transcripts/</code>, <code>analysis/reports/</code>
                </span>
              </div>
            </div>
          </div>

          <!-- Clips Folder -->
          <div class="form-step">
            <div class="step-content">
              <h3 class="step-title">Clips Folder (Library)</h3>
              <div class="setting-group">
                <div class="input-wrapper">
                  <mat-icon class="input-icon">video_library</mat-icon>
                  <input type="text"
                         class="modern-input"
                         formControlName="clipsFolder"
                         placeholder="/path/to/clips">
                  <button mat-raised-button
                          color="primary"
                          type="button"
                          (click)="browseClipsFolder()"
                          *ngIf="isElectron"
                          class="browse-btn">
                    <mat-icon>folder_open</mat-icon>
                    Browse
                  </button>
                </div>
                <span class="hint-text">
                  <mat-icon>info</mat-icon>
                  Location where video clips are stored. Library will scan this folder for videos to import.
                </span>
              </div>
            </div>
          </div>

          <!-- Download Settings -->
          <div class="form-step">
            <div class="step-content">
              <h3 class="step-title">Download Settings</h3>

              <div class="settings-row">
                <div class="setting-group">
                  <label class="setting-label">
                    <mat-icon>high_quality</mat-icon>
                    Video Quality
                  </label>
                  <select class="modern-select" formControlName="quality">
                    <option *ngFor="let option of qualityOptions" [value]="option.value">
                      {{option.label}}
                    </option>
                  </select>
                </div>

                <div class="setting-group">
                  <label class="setting-label">
                    <mat-icon>web</mat-icon>
                    Browser
                  </label>
                  <select class="modern-select" formControlName="browser">
                    <option *ngFor="let browser of browserOptions" [value]="browser.value">
                      {{browser.label}}
                    </option>
                  </select>
                </div>
              </div>

              <div class="checkbox-group">
                <label class="checkbox-item">
                  <mat-checkbox formControlName="convertToMp4"></mat-checkbox>
                  <span>Convert to MP4</span>
                </label>
                <label class="checkbox-item">
                  <mat-checkbox formControlName="fixAspectRatio"></mat-checkbox>
                  <span>Fix Aspect Ratio</span>
                </label>
                <label class="checkbox-item">
                  <mat-checkbox formControlName="useCookies"></mat-checkbox>
                  <span>Use Cookies</span>
                </label>
              </div>
            </div>
          </div>

          <!-- Batch Processing -->
          <div class="form-step">
            <div class="step-content">
              <h3 class="step-title">Batch Processing</h3>

              <div class="setting-group">
                <label class="checkbox-item">
                  <mat-checkbox formControlName="batchProcessingEnabled"></mat-checkbox>
                  <span>Enable Batch Downloads</span>
                </label>
              </div>

              <div class="setting-group">
                <label class="setting-label">
                  <mat-icon>list</mat-icon>
                  Max Concurrent Downloads
                </label>
                <input type="number"
                       class="modern-input"
                       formControlName="maxConcurrentDownloads"
                       min="1"
                       max="10"
                       placeholder="3">
              </div>
            </div>
          </div>

          <!-- Theme -->
          <div class="form-step">
            <div class="step-content">
              <h3 class="step-title">Appearance</h3>

              <div class="setting-group">
                <div class="theme-toggle">
                  <div class="theme-label">
                    <mat-icon>dark_mode</mat-icon>
                    <span>Dark Mode</span>
                  </div>
                  <mat-slide-toggle
                    [checked]="isDarkTheme$ | async"
                    (change)="toggleTheme()">
                  </mat-slide-toggle>
                </div>
              </div>
            </div>
          </div>

          <!-- Action Buttons -->
          <div class="action-buttons">
            <button type="button"
                    mat-stroked-button
                    class="secondary-btn"
                    (click)="goBack()">
              <mat-icon>arrow_back</mat-icon>
              Cancel
            </button>
            <button type="submit"
                    mat-raised-button
                    class="primary-btn"
                    [disabled]="settingsForm.invalid"
                    (click)="onSubmit()">
              <mat-icon>save</mat-icon>
              <span>Save Settings</span>
            </button>
          </div>
        </form>
      </div>
    </div>
  </div>
