/* ============================================================================
   OWEN MORGAN DESIGN SYSTEM - CREAMSICLE THEME
   ============================================================================ */

:root {
  --primary-orange: #ff6b35;
  --light-orange: #ff8c5a;
  --dark-orange: #e55529;

  --bg-primary: #ffffff;
  --bg-secondary: #f8f9fa;
  --bg-tertiary: #e9ecef;
  --bg-card: #ffffff;

  --text-primary: #212529;
  --text-secondary: #6c757d;
  --text-muted: #adb5bd;
  --border-color: #d1d5db;
  --shadow-color: rgba(0, 0, 0, 0.1);

  --border-radius: 8px;
  --border-radius-large: 12px;
  --transition: all 0.3s ease;
  --font-family: 'Inter', -apple-system, BlinkMacSystemFont, 'Segoe UI', sans-serif;

  --shadow-sm: 0 1px 2px 0 var(--shadow-color);
  --shadow-md: 0 4px 6px -1px var(--shadow-color);
  --shadow-lg: 0 10px 15px -3px var(--shadow-color);
  --shadow-xl: 0 20px 25px -5px var(--shadow-color);

  // Status colors
  --success-bg: #dcfce7;
  --success-text: #16a34a;
  --warning-bg: #fef3c7;
  --warning-text: #d97706;
  --danger-bg: #fee2e2;
  --danger-text: #dc2626;
  --info-bg: #dbeafe;
  --info-text: #2563eb;
}

/* Dark Theme - applies when body has dark-theme class or data-theme="dark" */
body[data-theme="dark"],
body.dark-theme {
  --bg-primary: #0f0f0f;
  --bg-secondary: #1a1a1a;
  --bg-tertiary: #2d2d2d;
  --bg-card: #1e1e1e;
  --text-primary: #ffffff;
  --text-secondary: #d1d5db;
  --text-muted: #9ca3af;
  --border-color: #374151;
  --shadow-color: rgba(0, 0, 0, 0.3);

  // Status colors for dark mode
  --success-bg: #14532d;
  --success-text: #86efac;
  --warning-bg: #713f12;
  --warning-text: #fcd34d;
  --danger-bg: #7f1d1d;
  --danger-text: #fca5a5;
  --info-bg: #1e3a8a;
  --info-text: #93c5fd;

  // Brighter icons in sidebar
  .app-sidenav .mat-icon {
    color: #e5e7eb !important;
  }

  // Dark mode Material component overrides
  .mat-mdc-card {
    background: var(--bg-card) !important;
    color: var(--text-primary) !important;
    border: 1px solid var(--border-color) !important;
    transition: var(--transition) !important;

    &:hover {
      box-shadow: var(--shadow-lg) !important;
      border-color: var(--primary-orange) !important;
    }
  }

  .mat-mdc-form-field {
    color: var(--text-primary) !important;

    .mdc-text-field--outlined .mdc-notched-outline .mdc-notched-outline__leading,
    .mdc-text-field--outlined .mdc-notched-outline .mdc-notched-outline__notch,
    .mdc-text-field--outlined .mdc-notched-outline .mdc-notched-outline__trailing {
      border-color: var(--border-color) !important;
    }

    .mdc-text-field--filled {
      background-color: var(--bg-secondary) !important;
    }

    input, textarea {
      color: var(--text-primary) !important;
    }

    .mat-mdc-floating-label {
      color: var(--text-secondary) !important;
    }
  }

  .mat-mdc-select {
    color: var(--text-primary) !important;
  }

  // Dropdown panel background
  .mat-mdc-select-panel {
    background-color: var(--bg-card) !important;
  }

  .mat-mdc-option {
    color: var(--text-primary) !important;
    background-color: var(--bg-card) !important;

    &:hover:not(.mdc-list-item--disabled) {
      background-color: var(--bg-secondary) !important;
    }

    &.mdc-list-item--selected:not(.mdc-list-item--disabled) {
      background-color: var(--bg-tertiary) !important;
    }
  }

  .mat-mdc-dialog-container {
    background: var(--bg-card) !important;
    color: var(--text-primary) !important;
  }

  .mat-mdc-snack-bar-container {
    background: var(--bg-card) !important;
    color: var(--text-primary) !important;
  }

  .mat-expansion-panel {
    background: var(--bg-card) !important;
    color: var(--text-primary) !important;
  }

  .mat-expansion-panel-header {
    background: var(--bg-card) !important;
    color: var(--text-primary) !important;
  }

  .mat-mdc-checkbox .mdc-checkbox__background {
    border-color: var(--text-secondary) !important;
  }

  .mat-mdc-text-field-wrapper {
    background: transparent !important;
  }

  .mat-mdc-checkbox .mdc-form-field label,
  .mat-mdc-checkbox .mdc-label,
  .mat-mdc-form-field .mdc-floating-label,
  .mat-mdc-form-field .mat-mdc-floating-label,
  .mat-mdc-select-value,
  .mat-mdc-select-arrow,
  .mat-mdc-form-field-hint-wrapper,
  .mat-hint {
    color: var(--text-primary) !important;
  }

  .mat-mdc-form-field .mdc-text-field--outlined:not(.mdc-text-field--disabled) .mdc-floating-label,
  .mat-mdc-form-field .mdc-text-field--outlined:not(.mdc-text-field--disabled) input,
  .mat-mdc-form-field .mdc-text-field--outlined:not(.mdc-text-field--disabled) textarea {
    color: var(--text-primary) !important;
  }

  .mat-expansion-panel-header-title,
  .mat-expansion-panel-header-description,
  .mat-mdc-option,
  .mdc-list-item__primary-text {
    color: var(--text-primary) !important;
  }

  input::placeholder,
  textarea::placeholder {
    color: var(--text-secondary) !important;
    opacity: 1;
  }

  // Sidenav dark mode
  .mat-drawer-container {
    background-color: var(--bg-primary) !important;
    color: var(--text-primary) !important;
  }

  .mat-drawer {
    background-color: var(--bg-secondary) !important;
    color: var(--text-primary) !important;
  }

  .mat-drawer-content {
    background-color: var(--bg-primary) !important;
  }

  // List items dark mode
  .mat-mdc-list-item,
  .mdc-list-item {
    color: var(--text-primary) !important;
  }

  .mat-mdc-list-item .mdc-list-item__primary-text {
    color: var(--text-primary) !important;
  }

  // Dialog dark mode (for paste URLs modal and others)
  .mat-mdc-dialog-surface,
  .mdc-dialog__surface {
    background-color: var(--bg-card) !important;
    color: var(--text-primary) !important;
  }

  .mat-mdc-dialog-title {
    color: var(--text-primary) !important;
  }

  .mat-mdc-dialog-content {
    color: var(--text-primary) !important;

    // Force all text elements in dialogs to use proper dark mode colors
    p, div, span, li, ul, ol, strong, em, label {
      color: var(--text-primary) !important;
    }

    // Status/alert boxes in dialogs
    .error-section,
    .warning-section,
    .info-section,
    .success-section {
      color: var(--text-primary) !important;
      background-color: var(--bg-secondary) !important;
      border-color: var(--border-color) !important;
    }

    // Error messages specifically
    .error-list,
    .error-item,
    .error-message {
      color: var(--text-primary) !important;
      background-color: var(--bg-secondary) !important;
    }
  }

  .mat-mdc-dialog-actions {
    background-color: var(--bg-card) !important;
  }

  // Dialog buttons dark mode
  .mat-mdc-dialog-actions .mat-mdc-button,
  .mat-mdc-dialog-actions .mat-mdc-outlined-button,
  .mat-mdc-dialog-actions .mdc-button {
    color: var(--text-primary) !important;
    border-color: var(--border-color) !important;
  }

  .mat-mdc-outlined-button:not(:disabled) {
    border-color: var(--border-color) !important;
    color: var(--text-primary) !important;
  }

  .mat-mdc-outlined-button:hover:not(:disabled) {
    background-color: var(--bg-secondary) !important;
  }

  // Stroked buttons in dark mode
  .mat-mdc-unelevated-button:not(.mat-primary):not(.mat-accent):not(.mat-warn),
  .mdc-button--outlined {
    border-color: var(--border-color) !important;
    color: var(--text-primary) !important;
  }

  // Fix emojis appearing black in dark mode
  .panel-title {
    color: var(--primary-orange) !important;

    // Ensure emojis don't inherit dark text color
    filter: none !important;
  }

  h1, h2, h3, h4, h5, h6 {
    color: var(--text-primary) !important;
  }

  p, div:not(.mat-mdc-progress-bar):not(.mdc-linear-progress):not([class*="mdc-"]):not([class*="mat-"]) {
    color: var(--text-primary) !important;
  }

  // Force all Material cards and their content to use dark mode colors
  .mat-mdc-card,
  .mat-card {
    background: var(--bg-card) !important;
    color: var(--text-primary) !important;

    * {
      color: var(--text-primary) !important;
    }

    // Exception for icons and buttons - let them keep their own colors
    .mat-icon,
    button,
    .mat-mdc-button,
    .mat-mdc-raised-button,
    .mat-mdc-icon-button {
      color: inherit !important;
    }
  }

  // Disabled buttons in dark mode - make them visible but clearly disabled
  .mat-mdc-button:disabled,
  .mat-mdc-raised-button:disabled,
  .mat-mdc-outlined-button:disabled,
  .mat-mdc-unelevated-button:disabled,
  button:disabled,
  button[disabled] {
    opacity: 0.5 !important;
    background-color: var(--bg-tertiary) !important;
    color: var(--text-muted) !important;
    border-color: var(--border-color) !important;
    cursor: not-allowed !important;
  }

  // Disabled raised/primary buttons need special handling
  .mat-mdc-raised-button.mat-primary:disabled,
  .mat-mdc-raised-button.mat-accent:disabled {
    --mdc-protected-button-container-color: var(--bg-tertiary) !important;
    --mdc-protected-button-label-text-color: var(--text-muted) !important;
    opacity: 0.6 !important;
  }

  // Material chips dark mode - clean style
  mat-chip,
  .mat-mdc-chip,
  .mdc-evolution-chip {
    border-radius: 8px !important;
    font-size: 0.875rem !important;
    background-color: var(--bg-tertiary) !important;
    border: 1px solid var(--border-color) !important;
    color: var(--text-primary) !important;

    .mdc-evolution-chip__text-label,
    .mat-mdc-chip-action-label {
      color: var(--text-primary) !important;
    }

    // Success variant
    &.success,
    &.mat-chip-success {
      background-color: var(--success-bg) !important;
      color: var(--success-text) !important;
      border-color: var(--success-text) !important;

      .mdc-evolution-chip__text-label,
      .mat-mdc-chip-action-label {
        color: var(--success-text) !important;
      }
    }

    // Warning variant
    &.warning,
    &.mat-chip-warning {
      background-color: var(--warning-bg) !important;
      color: var(--warning-text) !important;
      border-color: var(--warning-text) !important;

      .mdc-evolution-chip__text-label,
      .mat-mdc-chip-action-label {
        color: var(--warning-text) !important;
      }
    }

    // Danger variant
    &.danger,
    &.mat-chip-danger {
      background-color: var(--danger-bg) !important;
      color: var(--danger-text) !important;
      border-color: var(--danger-text) !important;

      .mdc-evolution-chip__text-label,
      .mat-mdc-chip-action-label {
        color: var(--danger-text) !important;
      }
    }

    // Info variant
    &.info,
    &.mat-chip-info {
      background-color: var(--info-bg) !important;
      color: var(--info-text) !important;
      border-color: var(--info-text) !important;

      .mdc-evolution-chip__text-label,
      .mat-mdc-chip-action-label {
        color: var(--info-text) !important;
      }
    }
  }

  // Material tabs dark mode
  mat-tab-group {
    .mdc-tab__text-label {
      color: rgba(255, 255, 255, 0.7) !important;
    }

    .mdc-tab--active .mdc-tab__text-label {
      color: #ff8f47 !important;
    }
  }

  // Material Menu dark mode styling (applies globally to all menus)
  .mat-mdc-menu-panel {
    background-color: #2d2d2d !important;
    color: rgba(255, 255, 255, 0.87) !important;

    .mat-mdc-menu-content {
      background-color: #2d2d2d !important;
    }

    .mat-mdc-menu-item {
      color: rgba(255, 255, 255, 0.87) !important;
      border: 2px solid transparent !important;
      transition: all 0.2s cubic-bezier(0.4, 0, 0.2, 1),
                  box-shadow 0.3s cubic-bezier(0.4, 0, 0.2, 1) !important;

      // Remove default focus styling when not using keyboard
      &:focus:not(:focus-visible):not(:hover) {
        background-color: transparent !important;
        border: 2px solid transparent !important;
        box-shadow: none !important;
      }

      // Only apply focus styles when actually focused via keyboard
      &:focus-visible {
        background-color: rgba(255, 102, 0, 0.18) !important;
        border: 2px solid rgba(255, 102, 0, 0.7) !important;
        box-shadow:
          -4px 0 10px rgba(255, 102, 0, 0.25),
          4px 0 10px rgba(255, 102, 0, 0.25),
          0 0 8px rgba(255, 102, 0, 0.25),
          inset 0 0 4px rgba(255, 102, 0, 0.1) !important;
      }

      // Hover always wins (must come last for specificity)
      &:hover {
        background-color: rgba(255, 102, 0, 0.18) !important;
        border: 2px solid rgba(255, 102, 0, 0.7) !important;
        box-shadow:
          -4px 0 10px rgba(255, 102, 0, 0.25),
          4px 0 10px rgba(255, 102, 0, 0.25),
          0 0 8px rgba(255, 102, 0, 0.25),
          inset 0 0 4px rgba(255, 102, 0, 0.1) !important;
      }

      // Icons in menu items
      .mat-icon,
      mat-icon {
        color: rgba(255, 255, 255, 0.7) !important;
      }

      // Text spans in menu items
      span {
        color: rgba(255, 255, 255, 0.87) !important;
      }

      // Checkbox in menu items
      .mat-mdc-checkbox {
        .mdc-checkbox__background {
          border-color: rgba(255, 255, 255, 0.5) !important;
        }

        .mdc-checkbox__checkmark {
          color: #fff !important;
        }
      }
    }

    // Dividers in menus
    .mat-divider,
    mat-divider {
      border-top-color: rgba(255, 255, 255, 0.12) !important;
    }

    // Menu header (for file type menu)
    .menu-header {
      color: rgba(255, 255, 255, 0.87) !important;
      border-bottom-color: rgba(255, 255, 255, 0.12) !important;

      button,
      .mat-mdc-button,
      .mat-mdc-icon-button {
        color: rgba(255, 255, 255, 0.87) !important;

        &:hover {
          background-color: rgba(255, 255, 255, 0.08) !important;
        }
      }

      span {
        color: rgba(255, 255, 255, 0.87) !important;
      }

      mat-icon {
        color: rgba(255, 255, 255, 0.7) !important;
      }
    }
  }
}

/* Fix placeholder overlap with Material floating label */
.mat-mdc-form-field:not(.mat-focused) input::placeholder,
.mat-mdc-form-field:not(.mat-focused) textarea::placeholder {
  opacity: 0;
}

/* Material Menu light mode styling (applies globally to all menus) */
.mat-mdc-menu-panel {
  .mat-mdc-menu-item {
    border: 2px solid transparent !important;
    transition: all 0.2s cubic-bezier(0.4, 0, 0.2, 1),
                box-shadow 0.3s cubic-bezier(0.4, 0, 0.2, 1) !important;

    // Remove default focus styling when not using keyboard
    &:focus:not(:focus-visible):not(:hover) {
      background-color: transparent !important;
      border: 2px solid transparent !important;
      box-shadow: none !important;
    }

    // Only apply focus styles when actually focused via keyboard
    &:focus-visible {
      background-color: rgba(255, 102, 0, 0.12) !important;
      border: 2px solid rgba(255, 102, 0, 0.6) !important;
      box-shadow:
        -3px 0 8px rgba(255, 102, 0, 0.2),
        3px 0 8px rgba(255, 102, 0, 0.2),
        0 0 6px rgba(255, 102, 0, 0.2),
        inset 0 0 3px rgba(255, 102, 0, 0.08) !important;
    }

    // Hover always wins (must come last for specificity)
    &:hover {
      background-color: rgba(255, 102, 0, 0.12) !important;
      border: 2px solid rgba(255, 102, 0, 0.6) !important;
      box-shadow:
        -3px 0 8px rgba(255, 102, 0, 0.2),
        3px 0 8px rgba(255, 102, 0, 0.2),
        0 0 6px rgba(255, 102, 0, 0.2),
        inset 0 0 3px rgba(255, 102, 0, 0.08) !important;
    }
  }
}

/* Light Mode Material Cards */
.mat-mdc-card {
  background: var(--bg-card) !important;
  color: var(--text-primary) !important;
  border: 1px solid var(--border-color) !important;
  box-shadow: var(--shadow-md) !important;
  transition: var(--transition) !important;

  &:hover {
    box-shadow: var(--shadow-lg) !important;
    border-color: var(--primary-orange) !important;
  }
}

/* ============================================================================
   UNIVERSAL BADGE & TAG SYSTEM - Creamsicle Template
   Works on ANY element: <span>, <div>, <mat-chip>, etc.
   ============================================================================ */

/* BADGES - Small compact indicators (12px radius, 0.75rem font) */
.badge {
  display: inline-block;
  padding: 0.25rem 0.75rem;
  border-radius: 12px;
  font-size: 0.75rem;
  font-weight: 600;
  line-height: 1.5;
  white-space: nowrap;
  margin: 0.25rem;
  cursor: pointer;
  transition: var(--transition);
  border: none;
}

/* Level badges (1-5) */
.badge.level-1 { background: #dcfce7 !important; color: #16a34a !important; }
.badge.level-2 { background: #ecfdf5 !important; color: #65a30d !important; }
.badge.level-3 { background: #fef3c7 !important; color: #d97706 !important; }
.badge.level-4 { background: #fee2e2 !important; color: #dc2626 !important; }
.badge.level-5 { background: #fca5a5 !important; color: #991b1b !important; }

/* Type badges */
.badge.type-religious { background: #dbeafe !important; color: #2563eb !important; }
.badge.type-philosophical { background: #f3e8ff !important; color: #9333ea !important; }
.badge.type-therapy { background: #ecfdf5 !important; color: #059669 !important; }
.badge.type-business { background: #fef3c7 !important; color: #d97706 !important; }
.badge.type-political { background: #fee2e2 !important; color: #dc2626 !important; }

/* Status badges */
.badge.status-active { background: #dcfce7 !important; color: #16a34a !important; }
.badge.status-defunct { background: #f3f4f6 !important; color: #6b7280 !important; }
.badge.status-reformed { background: #dbeafe !important; color: #2563eb !important; }
.badge.status-investigating { background: #fef3c7 !important; color: #d97706 !important; }
.badge.status-verified { background: #f0f9ff !important; color: #0369a1 !important; }

/* TAGS - Larger pills with semi-transparent backgrounds (20px radius) */
.tag {
  padding: 0.5rem 1rem;
  border-radius: 20px;
  font-weight: 500;
  cursor: pointer;
  transition: var(--transition);
  border: 1px solid transparent;
  display: inline-block;
  white-space: nowrap;
  margin: 0.25rem;
}

/* Tag sizes */
.tag.large {
  font-size: 1rem;
  padding: 0.75rem 1.25rem;
}

.tag.medium {
  font-size: 0.9rem;
  padding: 0.6rem 1.1rem;
}

.tag.small {
  font-size: 0.8rem;
  padding: 0.4rem 0.9rem;
}

/* Tag variants with semi-transparent backgrounds */
.tag.warning {
  background: rgba(239, 68, 68, 0.1) !important;
  color: #dc2626 !important;
  border-color: rgba(239, 68, 68, 0.2) !important;

  &:hover {
    background: rgba(239, 68, 68, 0.2) !important;
    transform: translateY(-1px);
  }
}

.tag.success {
  background: rgba(34, 197, 94, 0.1) !important;
  color: #16a34a !important;
  border-color: rgba(34, 197, 94, 0.2) !important;

  &:hover {
    background: rgba(34, 197, 94, 0.2) !important;
    transform: translateY(-1px);
  }
}

.tag.info {
  background: rgba(59, 130, 246, 0.1) !important;
  color: #2563eb !important;
  border-color: rgba(59, 130, 246, 0.2) !important;

  &:hover {
    background: rgba(59, 130, 246, 0.2) !important;
    transform: translateY(-1px);
  }
}

.tag.primary {
  background: rgba(255, 107, 53, 0.1) !important;
  color: var(--primary-orange) !important;
  border-color: rgba(255, 107, 53, 0.2) !important;

  &:hover {
    background: rgba(255, 107, 53, 0.2) !important;
    transform: translateY(-1px);
  }
}

/* ============================================================================
   MATERIAL CHIPS - Make mat-chips work with badge/tag classes
   ============================================================================ */

/* Default Material chip styling - Badge-like by default */
mat-chip,
.mat-mdc-chip,
.mdc-evolution-chip {
  /* Badge-like default styling */
  border-radius: 12px !important;
  font-size: 0.75rem !important;
  font-weight: 600 !important;
  padding: 0.25rem 0.75rem !important;
  min-height: auto !important;
  line-height: 1.5 !important;
  background-color: var(--bg-secondary) !important;
  border: none !important;
  transition: var(--transition) !important;
  color: var(--text-primary) !important;

  .mdc-evolution-chip__text-label,
  .mat-mdc-chip-action-label,
  .mdc-evolution-chip__action--primary {
    color: inherit !important;
    font-size: 0.75rem !important;
    font-weight: 600 !important;
  }

  // Hover effect
  &:hover {
    transform: translateY(-1px);
    box-shadow: var(--shadow-sm);
    opacity: 0.8;
  }

  // Selected state
  &.mat-mdc-chip-selected,
  &[aria-selected="true"] {
    background-color: var(--primary-orange) !important;
    color: white !important;

    .mdc-evolution-chip__text-label,
    .mat-mdc-chip-action-label {
      color: white !important;
    }
  }

  /* COMPACT CHIP VARIANT - Small filter chips */
  &.compact-chip {
    min-height: 24px !important;
    height: auto !important;
    font-size: 11px !important;
    font-weight: 500 !important;
    padding: 4px 10px !important;
    border-radius: 12px !important;
    background-color: var(--bg-secondary) !important;
    border: 1px solid var(--border-color) !important;
    cursor: pointer !important;
    transition: all 0.2s ease !important;

    .mdc-evolution-chip__text-label,
    .mat-mdc-chip-action-label {
      color: var(--text-primary) !important;
      font-size: 11px !important;
      font-weight: 500 !important;
    }

    .chip-count {
      opacity: 0.6;
      margin-left: 2px;
      font-size: 10px;
      color: inherit;
    }

    &:hover:not(.selected):not([aria-selected="true"]) {
      background-color: var(--bg-tertiary) !important;
      border-color: var(--primary-orange) !important;
      opacity: 1 !important;
      transform: translateY(-1px);

      .mdc-evolution-chip__text-label,
      .mat-mdc-chip-action-label {
        color: var(--primary-orange) !important;
      }
    }

    &.selected,
    &[aria-selected="true"] {
      background-color: var(--primary-orange) !important;
      border-color: var(--primary-orange) !important;

      .mdc-evolution-chip__text-label,
      .mat-mdc-chip-action-label {
        color: white !important;
        font-weight: 600 !important;
      }

      .chip-count {
        opacity: 0.9;
        color: white;
      }
    }
  }

}

/* Material Checkboxes - Styled to match theme */
.mat-mdc-checkbox {
  .mdc-checkbox {
    border-radius: 4px !important;
  }

  .mdc-checkbox__background {
    border-radius: 4px !important;
    border-width: 2px !important;
    border-color: var(--border-color) !important;
    transition: var(--transition) !important;
  }

  .mdc-checkbox--selected .mdc-checkbox__background,
  .mdc-checkbox__native-control:checked ~ .mdc-checkbox__background {
    background-color: var(--primary-orange) !important;
    border-color: var(--primary-orange) !important;
  }

  .mdc-checkbox__checkmark,
  .mdc-checkbox__checkmark-path {
    color: white !important;
    stroke: white !important;
  }

  &:hover .mdc-checkbox__background,
  .mdc-checkbox:hover .mdc-checkbox__background {
    border-color: var(--primary-orange) !important;
  }

  .mdc-checkbox__ripple,
  .mat-mdc-checkbox-ripple {
    background-color: var(--primary-orange) !important;
  }

  // Indeterminate state
  .mdc-checkbox--indeterminate .mdc-checkbox__background {
    background-color: var(--primary-orange) !important;
    border-color: var(--primary-orange) !important;
  }
}

/* Override Material Theme Colors */
.mat-mdc-raised-button.mat-primary,
.mat-mdc-fab.mat-primary,
.mat-mdc-mini-fab.mat-primary {
  --mdc-protected-button-container-color: var(--primary-orange) !important;
  --mdc-protected-button-label-text-color: white !important;
  transition: var(--transition) !important;
}

.mat-mdc-raised-button.mat-primary:hover:not(:disabled),
.mat-mdc-fab.mat-primary:hover:not(:disabled),
.mat-mdc-mini-fab.mat-primary:hover:not(:disabled) {
  --mdc-protected-button-container-color: var(--dark-orange) !important;
  transform: translateY(-2px) !important;
  box-shadow: var(--shadow-lg) !important;
}

.mat-mdc-raised-button.mat-accent {
  --mdc-protected-button-container-color: var(--primary-orange) !important;
  --mdc-protected-button-label-text-color: white !important;
}

.mat-mdc-raised-button.mat-accent:hover:not(:disabled) {
  --mdc-protected-button-container-color: var(--dark-orange) !important;
}

.mat-toolbar.mat-primary {
  --mdc-elevated-card-container-color: var(--bg-primary) !important;
  background: var(--bg-primary) !important;
  color: var(--text-primary) !important;
  box-shadow: var(--shadow-sm) !important;
  border-bottom: 1px solid var(--border-color) !important;
}

.mat-icon.mat-primary {
  color: var(--primary-orange) !important;
}

// Apply design system to body
body {
  font-family: var(--font-family) !important;
  background: var(--bg-primary) !important;
  color: var(--text-primary) !important;
}

// FORCE full height layout - override Angular Material defaults
.mat-drawer-container {
  height: 100% !important;
  position: relative !important;
}

.mat-drawer-content {
  display: flex !important;
  flex-direction: column !important;
  height: 100% !important;
  overflow-y: auto !important;
}

// Force router outlet to fill height
router-outlet + * {
  display: flex !important;
  flex: 1 !important;
  min-height: 0 !important;
}

// Auto dark mode based on system preference (only if no explicit theme is set)
@media (prefers-color-scheme: dark) {
  body:not([data-theme="light"]):not([data-theme="dark"]) {
    --bg-primary: #0f0f0f;
    --bg-secondary: #1a1a1a;
    --bg-tertiary: #2d2d2d;
    --bg-card: #1e1e1e;
    --text-primary: #ffffff;
    --text-secondary: #d1d5db;
    --text-muted: #9ca3af;
    --border-color: #374151;
    --shadow-color: rgba(0, 0, 0, 0.3);

    --success-bg: #14532d;
    --success-text: #86efac;
    --warning-bg: #713f12;
    --warning-text: #fcd34d;
    --danger-bg: #7f1d1d;
    --danger-text: #fca5a5;
    --info-bg: #1e3a8a;
    --info-text: #93c5fd;
  }
}

/* ============================================================================
   TEMPLATE-BASED UTILITY STYLES (from creamsicle template)
   ============================================================================ */

/* Card Styles */
.card {
  background: var(--bg-card);
  border-radius: var(--border-radius);
  box-shadow: var(--shadow-md);
  overflow: hidden;
  transition: var(--transition);
  border: 1px solid var(--border-color);
}

.card:hover {
  transform: translateY(-4px);
  box-shadow: var(--shadow-lg);
  border-color: var(--primary-orange);
}

.card-icon {
  height: 120px;
  background: linear-gradient(135deg, var(--primary-orange), var(--light-orange));
  display: flex;
  align-items: center;
  justify-content: center;
  font-size: 3rem;
  color: white;
}

.card-content {
  padding: 1.5rem;
}

.card-title {
  font-size: 1.25rem;
  font-weight: 700;
  color: var(--primary-orange);
  margin-bottom: 0.5rem;
}

.card-description {
  color: var(--text-secondary);
  margin-bottom: 1rem;
  line-height: 1.5;
}

/* Button Styles */
.btn {
  padding: 0.75rem 1.5rem;
  border-radius: var(--border-radius);
  font-weight: 600;
  cursor: pointer;
  transition: var(--transition);
  border: none;
  text-decoration: none;
  display: inline-flex;
  align-items: center;
  gap: 0.5rem;
}

.btn-primary {
  background: var(--primary-orange);
  color: white;
}

.btn-primary:hover {
  background: var(--dark-orange);
  transform: translateY(-2px);
}

.btn-secondary {
  background: var(--bg-secondary);
  color: var(--text-primary);
  border: 1px solid var(--border-color);
}

.btn-secondary:hover {
  background: var(--bg-tertiary);
}

/* Badge Styles */
.badge {
  display: inline-block;
  padding: 0.25rem 0.75rem;
  border-radius: 12px;
  font-size: 0.75rem;
  font-weight: 600;
  text-transform: uppercase;
  letter-spacing: 0.025em;
}

.badge-success {
  background: var(--success-bg);
  color: var(--success-text);
}

.badge-warning {
  background: var(--warning-bg);
  color: var(--warning-text);
}

.badge-danger {
  background: var(--danger-bg);
  color: var(--danger-text);
}

.badge-info {
  background: var(--info-bg);
  color: var(--info-text);
}

/* Panel Styles */
.panel {
  background: var(--bg-card);
  border-radius: var(--border-radius);
  box-shadow: var(--shadow-md);
  border: 1px solid var(--border-color);
  overflow: hidden;
}

.panel-header {
  background: var(--bg-secondary);
  padding: 1rem 1.5rem;
  border-bottom: 1px solid var(--border-color);
  display: flex;
  justify-content: space-between;
  align-items: center;
}

.panel-title {
  font-weight: 600;
  color: var(--primary-orange);
}

.panel-content {
  padding: 1.5rem;
}

/* Alert Styles */
.alert {
  display: flex;
  align-items: flex-start;
  gap: 1rem;
  padding: 1rem 1.5rem;
  border-radius: var(--border-radius);
  border: 1px solid;
  margin-bottom: 1rem;
}

.alert-success {
  background: #f0fdf4;
  border-color: #22c55e;
  color: #166534;
}

.alert-warning {
  background: #fffbeb;
  border-color: #f59e0b;
  color: #92400e;
}

.alert-danger {
  background: #fef2f2;
  border-color: #ef4444;
  color: #991b1b;
}

.alert-info {
  background: #eff6ff;
  border-color: #3b82f6;
  color: #1e40af;
}

/* Dark mode alerts */
body[data-theme="dark"],
body.dark-theme {
  .alert-success {
    background: var(--success-bg);
    color: var(--success-text);
  }

  .alert-warning {
    background: var(--warning-bg);
    color: var(--warning-text);
  }

  .alert-danger {
    background: var(--danger-bg);
    color: var(--danger-text);
  }

  .alert-info {
    background: var(--info-bg);
    color: var(--info-text);
  }
}

/* Progress Bars */
.progress {
  height: 8px;
  background: var(--bg-tertiary);
  border-radius: 4px;
  overflow: hidden;
  margin: 0.5rem 0;
}

.progress-fill {
  height: 100%;
  background: linear-gradient(135deg, var(--primary-orange), var(--light-orange));
  transition: width 0.5s ease;
}

/* List Container */
.list-container {
  background: var(--bg-card);
  border-radius: var(--border-radius);
  box-shadow: var(--shadow-md);
  border: 1px solid var(--border-color);
  overflow: hidden;
}

.list-header {
  background: var(--bg-secondary);
  padding: 1rem 1.5rem;
  border-bottom: 1px solid var(--border-color);
  display: flex;
  justify-content: space-between;
  align-items: center;
}

.list-header h4 {
  color: var(--primary-orange);
  font-weight: 600;
  margin: 0;
}

/* Compact Lists */
.compact-list {
  max-height: 350px;
  overflow-y: auto;
}

.compact-item {
  display: flex;
  align-items: center;
  gap: 0.75rem;
  padding: 0.75rem 1rem;
  border-bottom: 1px solid var(--border-color);
  transition: var(--transition);
  cursor: pointer;
}

.compact-item:last-child {
  border-bottom: none;
}

.compact-item:hover {
  background: var(--bg-secondary);
  transform: translateX(2px);
}

.compact-item.selected {
  background: rgba(255, 107, 53, 0.1);
  border-left: 3px solid var(--primary-orange);
}

/* Utility Classes */
.text-center { text-align: center; }
.mb-1 { margin-bottom: 0.5rem; }
.mb-2 { margin-bottom: 1rem; }
.mb-3 { margin-bottom: 1.5rem; }
.mt-1 { margin-top: 0.5rem; }
.mt-2 { margin-top: 1rem; }
.flex { display: flex; }
.flex-center { display: flex; align-items: center; justify-content: center; }
.gap-1 { gap: 0.5rem; }
.gap-2 { gap: 1rem; }
.hidden { display: none; }
